有公司又有部門，你覺得是否用 companies + departments？我看有些集團使用時，直接用 teams 來分公司、部門

好問題，而且這一題沒有標準答案，但有「後不後悔」的差別 😄
我直接站隊講結論，再解釋為什麼。

結論先給

👉 你這個系統（差勤＋計薪）我會選：

companies + departments（清楚、務實、抗變化）

👉 不建議一開始就只用 teams 來包一切

為什麼 teams 很誘人，但容易出事

我先幫 teams 派說句公道話。

teams 的優點

結構很漂亮

可以無限層級（集團 / 子公司 / 部門 / 小組）

UI 拖拉很爽

很多 SaaS（Notion、Slack、某些 HR 系統）確實這樣做。

但問題來了👇

差勤 / 計薪是「強制度」系統，不是協作工具

你現在做的不是：

聊天

專案協作

看板

而是：

法規、薪資、勞檢會來看的東西

這裡有幾個 teams 很難優雅處理的點。

1️⃣ 公司 ≠ 部門（在制度上）

在台灣（其實很多國家都一樣）：

項目	公司層級	部門層級
勞保 / 勞退	✅	❌
發薪主體	✅	❌
行事曆基準	✅	❌
國定假日	✅	❌
財報	✅	❌

如果你用 teams：

teams
- id
- parent_id
- type = company / department / group ?


你會開始在很多地方寫：

if ($team->type === 'company') { ... }


這是 隱性耦合。

2️⃣ 部門可以換，公司不能亂換

現實世界：

員工常換部門

公司幾乎不換（或換很痛）

如果兩者同為 team：

employee_team_maps


那你得處理：

一個人同時屬於多個 team？

哪個 team 是發薪主體？

哪個 team 決定打卡規則？

最後你還是會補：

employees.company_id


👉 那你 teams 就退化成「部門表」。

3️⃣ teams 模型會讓規則指派變模糊

你前面問過的關鍵問題：

A 公司要上班，B 公司不上班
部門、計薪、行事曆可能不同

如果是 teams：

team_calendar_id
team_salary_policy


那你會遇到：

「這個 team 是不是公司層級？
還是只是生產一課？」

規則查找順序會變成：

employee → teams → parent teams → ??? → default


這在除錯時是惡夢。

我會怎麼建（你這套系統的版本）
① 公司是第一級（不可模糊）
companies
- id
- name
- calendar_id
- default_salary_policy

② 部門是公司底下的組織單位
departments
- id
- company_id
- name
- salary_policy_code (nullable)

③ 員工清楚地「屬於一家公司」
employees
- id
- company_id
- department_id


📌 這三張表的語意非常清楚

那 teams 完全不能用嗎？

不是。

👉 teams 適合當「工作分組」，不是制度單位

例如：

專案小組

跨部門任務編組

臨時產線

某檔活動人員

teams
- id
- name
- company_id

employee_team_maps
- employee_id
- team_id


❗ teams 不：

決定計薪

決定是否補班

決定國定假日

一句話記法（這句很重要）

凡是會影響「錢、假、法規」的，不要用 teams 抽象

為什麼我敢這樣建議你

你前面幾個問題其實已經暴露出你的系統特性：

行事曆只有一套（公司層級）

員工用排班決定上下班時間

計薪規則可能依公司／部門不同

你在意「歷史可回溯」

👉 這些全部都指向 companies + departments 是主幹